# Definição dos nossos serviços/contêineres
services:
  # Nosso serviço de banco de dados
  db:
    image: mysql:8.0          # Usar a imagem oficial do MySQL versão 8.0
    container_name: mysql_db  # Nomear nosso contêiner para fácil identificação
    restart: always           # Reiniciar o contêiner automaticamente se ele parar
    environment:
      MYSQL_ROOT_PASSWORD: root_password  # Senha para o superusuário 'root'. MUDE EM PRODUÇÃO!
      MYSQL_DATABASE: movies_db         # Cria um banco de dados chamado 'movies_db' na inicialização
      MYSQL_USER: app_user              # Cria um usuário dedicado para nossa aplicação
      MYSQL_PASSWORD: app_password      # Senha para esse usuário. MUDE EM PRODUÇÃO!
    ports:
      - "3306:3306"           # Mapeia a porta 3306 do contêiner para a porta 3306 da sua máquina
    volumes:
      - mysql_data:/var/lib/mysql # Garante que os dados do banco persistam mesmo se o contêiner for removido

# Define o volume nomeado para persistência dos dados
volumes:
  mysql_data: